###是否对所有的 JavaScript 库进行了异步加载？

当用户一个页面时，浏览器获取 HTML 构造 DOM，获取css构造 CSSOM，然后通过匹配 DOM 和 CSSOM 生成一个渲染树。只要需要解析 JavaScript 时，浏览器就会延迟开始渲染页面的时间。

可以通过给脚本添加 HTML 中的` defer` 和 `async` 属性，明确地告诉浏览器立即开始渲染页面。

**应该选用 defer，慎用 async**

使用 async 的脚本一旦获取到，就会立即执行。
如果这种情况发生得非常快，例如当脚本处于缓存就绪状态时，它实际上会阻塞 HTML 解析器。
使用 defer，浏览器在解析 HTML 之前不会执行脚本。因此，除非在开始渲染之前需要执行 JavaScript，否则最好都使用 defer。

###使用 IntersectionObserver 和优先级提示（priority hints）懒加载耗性能的组件

####1. native lazy-loading

在 <script>, <img>, 或者 <link>（只有 Blink 有效) 元素上使用 important 属性（high 或者 low）。这是一个**将图片置于次要地位，以及重新确定脚本优先级**的很好的方法

####2. 执行延迟加载脚本的最有效方式是使用 Intersection Observer API

该 API 可以异步观察目标元素与祖先元素或文档的 viewport 之间交集的变化。创建一个 IntersectionObserver 对象，它接收一个回调函数和一组参数。然后添加一个观察目标。
当目标变得可见或不可见时，回调函数就会执行，所以当它和 viewport 相交时，您可以在元素变得可见之前执行一些操作。

### 渐进加载图片
先加载低质量甚至模糊的图片，然后随着页面继续加载，将它们替换为高质量的完整版本。

**提高首次进行有意义的绘制时间**

可以通过使用 SQIP[485]创建一个低质量的图片版本作为` SVG 占位符`，或者使用` CSS 线性渐变`作为渐变图片占位符来实现。这些占位符可以嵌入到 HTML 中，因为它们可以很好地使用文本压缩方法进行压缩。

甚至更前沿可以：跟踪图像并使用基本形状和边缘创建一个轻量级的 SVG 占位符，首先加载它，然后从占位符矢量图像转换为（加载的）位图图像

### 发送了关键 CSS 吗？

通用的做法是：为了确保浏览器尽快开始渲染页面，收集渲染首屏可见部分所需的所有 CSS（称为"关键 CSS "或“首屏显示 CSS ”），并将它内联在页面的 <head> 标签中，从而减少往返请求传输

**关键 CSS 的预算大约为 14KB**

**media="print" 的 link ** :可以欺骗浏览器异步获取 CSS，但是一旦它加载完成，就会应用到屏幕环境中

**避免将 <link rel="stylesheet"> 放在 async 代码段之前**
如果脚本不依赖于样式表，可以考虑将阻塞脚本置于阻塞样式之上。如果存在依赖，可以将 JavaScript 分成两部分，将它们分别放到 CSS 的两边来加载

### 流式化响应

###预热连接以加速传输

使用 resource hint节省时间：
`dns-prefetch `可以在后台执行 DNS 查找，
`preconnect` 控制浏览器在后台启动连接握手（DNS, TCP, TLS），
`prefetch` 要求浏览器请求一个资源，
`preload `预加载资源且不执行。
`prerender` 已弃用。转而替换的是prefetch。它提示浏览器在后台为下一个导航构建整个页面的资源
#### 注意
**1.至少会使用 preconnect 和 dns-prefetch，会谨慎使用 prefetch, preload 和 prerender**
** 2.preload预加载的优先级高于关键css**
		
		通过 preload 请求浏览器下载重要字体是一个很好的方式。然而，需要仔细检查它是否真的有助于性能，因为在预加载字体时存在一个优先级的难题：由于预加载被视为非常重要，它可以跳过甚至更关键的资源，如关键 CSS

3.preload 有助于将资源的开始下载时间[549]提前到更接近初始请求的时间，但是预加载资源会占用与发出请求的页面相关的内存缓存。
4.preload 可以很好地处理 HTTP 缓存：如果资源已经在 HTTP 缓存中，则永远不会发送网络请求
5.preload 对于后续触发加载的资源，如 background-image 加载的图片、内联关键的 CSS（或 JavaScript）并预加载其余的 CSS（或 JavaScript）非常有用。
6.只有在浏览器从服务器接收到 HTML 并且解析器找到 preload 标记之后，preload 标记才能初始化预加载。

###优化过渲染体验

尝试`骨架屏幕`，而不是展示加载中的一个指示器.
添加过渡/动画，并在没有更多优化的情况下欺骗用户体验。

###防止重绘重排

查一下 Charis Theodoulou 的最小化 DOM 重绘和布局的指南，还有 Paul Irish 的强制布局和重绘的列表，还有 CSSTriggers.com